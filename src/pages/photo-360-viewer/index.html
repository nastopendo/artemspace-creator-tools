<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="photo360ViewerTitle">360 Photo Viewer</title>
    <link rel="stylesheet" href="../../style.css" />
    <style>
      #viewer-container {
        width: 100%;
        height: 600px;
        min-height: 600px;
        position: relative;
        background: #000;
        border-radius: 0.5rem;
        overflow: hidden;
      }
      a-scene {
        display: block;
        height: 600px !important;
        width: 100% !important;
      }
      a-assets {
        display: none;
      }
      #drop-zone {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
        transition: all 0.3s ease;
        pointer-events: all;
      }
      #drop-zone.hidden {
        opacity: 0;
        pointer-events: none;
      }
      #drop-zone.drag-over {
        background: rgba(59, 130, 246, 0.2);
        border: 4px dashed #3b82f6;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800 min-h-screen py-8 px-4">
    <header>
      <nav>
        <a
          href="/"
          data-link
          class="text-blue-600 hover:text-blue-800"
          data-i18n="backToTools"
          >‚Üê Back to Tools</a
        >
      </nav>
    </header>

    <div
      class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-8 animate-fade-in"
    >
      <h1
        class="text-3xl font-bold text-center text-gray-800 mb-8"
        data-i18n="photo360ViewerTitle"
      >
        360 Photo Viewer
      </h1>

      <div
        class="mb-6 text-center text-gray-600"
        data-i18n="photo360ViewerDesc"
      >
        Upload or drag and drop a 360¬∞ panoramic image to view it in an
        interactive 360¬∞ player.
      </div>

      <div id="viewer-container" class="shadow-inner border border-gray-200">
        <div id="drop-zone">
          <div
            class="text-center p-8 bg-white/80 rounded-xl shadow-lg border-2 border-dashed border-gray-300"
          >
            <p
              class="text-xl font-semibold mb-4 text-gray-700"
              data-i18n="dragDrop360"
            >
              Drag & Drop 360¬∞ Image Here
            </p>
            <p class="mb-6 text-gray-500" data-i18n="or">or</p>
            <button
              id="selectBtn"
              class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
              data-i18n="selectFile"
            >
              Select File
            </button>
            <input id="fileInput" type="file" accept="image/*" class="hidden" />
          </div>
        </div>

        <a-scene
          embedded
          loading-screen="enabled: false"
          vr-mode-ui="enabled: true"
          style="height: 600px; width: 100%"
        >
          <!-- Sky / Panorama -->
          <a-sky id="sky" rotation="0 -90 0"></a-sky>

          <!-- Camera with controls -->
          <a-entity camera look-controls="reverseMouseDrag: true"></a-entity>
        </a-scene>
      </div>

      <div class="mt-6 flex flex-wrap justify-between items-center gap-4">
        <div class="flex items-center gap-4">
          <div class="text-sm text-gray-500">
            <span data-i18n="supportedFormats"
              >Supported formats: JPG, PNG, WebP</span
            >
          </div>
        </div>

        <div class="flex items-center gap-2">
          <div class="flex bg-gray-100 rounded-lg p-1 mr-2">
            <button
              id="zoomOutBtn"
              class="p-2 hover:bg-white rounded-md transition-colors text-gray-600"
              title="Zoom Out"
              data-i18n-target="title"
              data-i18n="zoomOut"
            >
              ‚ûñ
            </button>
            <button
              id="zoomInBtn"
              class="p-2 hover:bg-white rounded-md transition-colors text-gray-600"
              title="Zoom In"
              data-i18n-target="title"
              data-i18n="zoomIn"
            >
              ‚ûï
            </button>
          </div>
          <button
            id="resetBtn"
            class="px-4 py-2 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors flex items-center gap-2 font-medium"
          >
            <span data-i18n="resetView">Reset View</span> üîÑ
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="./photo-360-viewer.js"></script>
  </body>
</html>
